var loggy=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function o(e){for(var o=1;o<arguments.length;o++){var r=null!=arguments[o]?arguments[o]:{};o%2?n(Object(r),!0).forEach((function(n){t(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var r,i={connectivity:{service:{local:"http://localhost:2800",demo:"https://loggy-demo-qvnfzcesoq-ew.a.run.app",prod:"https://loggy-prod-qvnfzcesoq-ew.a.run.app"}},adapter:{name:"loggy-adapter-browser",type:"browser",version:"v1.0.0"}},c=(r={sendAnalytics:!1},{set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==e(t)||t.constructor!==Object)throw new Error("the provided LOGGY config is not a valid object");if(!t.ticket||"string"!=typeof t.ticket||50!==t.ticket.length)throw new Error("the provided LOGGY ticket is invalid");if(t.badges&&t.badges.constructor!==Object)throw new Error("the provided LOGGY badges need to be an object");Object.keys(t.badges||{}).forEach((function(e){if("string"!=typeof t.badges[e])throw new Error("LOGGY badges can only contain strings")})),r=o({},r,{},t)},get:function(){return r}}),a={generateUTCInSeconds:{generateUTCInSeconds:function(){return Math.floor(Date.now()/1e3)}}.generateUTCInSeconds},s=function(){var e=[];return{add:function(t){"string"==typeof t&&(e.push({timestamp:a.generateUTCInSeconds(),type:"log",log:t}),e.length>10&&e.shift())},get:function(){return e}}}(),l=function(e){var t=e.message,n=e.path,r=void 0===n?"":n,l=e.line,d=void 0===l?"":l,f=e.stack,u=e.constructor,p=c.get();t&&f&&p.ticket&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",n=c.get(),o=new XMLHttpRequest,r=i.connectivity.service[n.instance]||i.connectivity.service.prod,a="/logging/"+t;o.open("POST",r+a,!0),o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(e)),o.onreadystatechange=function(){4===this.readyState&&200!==this.status&&console.error("failed to send event to LOGGY with error:",this.statusText)}}(o({ticket:p.ticket,message:t,path:r,logs:s.get()},p.badges&&{badges:p.badges},{line:d.toString(),type:u&&u.name||"error",stacktrace:f,adapter:i.adapter,timestamp:a.generateUTCInSeconds()}))},d=function(){window.onerror=function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i={message:e,path:t,line:n,column:o=o||window.event&&window.event.errorCharacter,stack:r.stack,constructor:r.constructor};return l(i),!1}},f=function(){var e=console.log.bind(console);console.log=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];s.add(n.join(" ")),e.apply(void 0,n)};var t=console.info.bind(console);console.info=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];s.add(n.join(" ")),t.apply(void 0,n)};var n=console.error.bind(console);console.error=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];s.add(t.join(" ")),n.apply(void 0,t)}};return{init:function(e){c.set(e),f(),d()},emitError:function(e){l(e)}}}();
